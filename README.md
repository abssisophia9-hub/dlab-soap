# DLAB – Distributed Log Analysis Platform
## Milestone 2: XML/SOAP Web Service

## Overview
DLAB is a distributed system that allows a client to perform **remote log file analysis** as if it were local. The client calls remote operations over the network using SOAP — with no manual networking or serialisation code.

---

## Technology: SOAP/XML Web Services (JAX-WS)

**Why SOAP?**
- The consumer invokes remote methods using plain local syntax (Python function, Java method call)
- The WSDL is the API contract — generated automatically from Java using `wsgen` (code-first approach)
- All marshalling/unmarshalling of XML is handled by JAX-WS over HTTP — the application code never touches XML directly
- Any language with a SOAP library can consume the same service

**Stack:**
| Layer | Technology |
|---|---|
| Protocol | SOAP 1.1 |
| Transport | HTTP |
| Serialisation | XML |
| Provider | Java + JAX-WS |
| Consumer | Python (Zeep) |
| API Contract | WSDL (generated by wsgen) |

---

## Architecture
```
  [Java Provider]  ←— SOAP over HTTP —→  [Python Consumer]
  LogAnalyzer.java                        consumer.py
  port: 9000                              (Zeep)
```

---

## Service Contract (WSDL)

**Endpoint:** `http://localhost:9000/loganalyzer`

| Operation | Parameters | Returns |
|---|---|---|
| `countByStatus` | `filePath: String` | `StatusCount` |
| `filterByLevel` | `filePath: String`, `level: String` | `String[]` |

**StatusCount fields:**
- `errorCount`
- `warnCount`
- `infoCount`
- `debugCount`

---

## Project Structure
```
dlab-clean/
├── build.gradle
├── settings.gradle
└── src/main/
    ├── java/ma/aui/sse/paradigms/integration/xs/
    │   ├── loganalysis/provider/
    │   │   ├── LogAnalyzer.java       (@WebService – 2 operations)
    │   │   └── StatusCount.java       (DTO)
    │   └── provider/
    │       └── Provider.java          (Endpoint.publish)
    ├── python/
    │   └── consumer.py                (Python consumer – Zeep)
    └── resources/logs/
        └── app.log                    (sample log file)
```

---

## How to Run

### Prerequisites
- JDK 11+
- Python 3.8+
- Gradle

### Terminal 1 — Start the Provider
```bash
gradle wrapper
.\gradlew clean build
.\gradlew wsgen
.\gradlew run
```
Provider is live at `http://localhost:9000/loganalyzer?wsdl`

### Terminal 2 — Run Python Consumer
```bash
pip install zeep
python src/main/python/consumer.py
```

### Expected Output
```
ERROR: 5
WARN:  2
INFO:  8
DEBUG: 1

ERROR lines:
  2024-03-01 08:07:11 ERROR Database connection lost: timeout after 30s
  2024-03-01 08:20:45 ERROR NullPointerException in UserService.getById
  ...
```
